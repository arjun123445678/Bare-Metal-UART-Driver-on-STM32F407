Bare-Metal UART Driver on STM32F4
STM32CubeIDE â€¢ Register-Level Programming â€¢ Renode Simulation

This repository contains a complete Bare-Metal UART Driver implementation for the STM32F4 series, written without HAL/LL libraries and fully tested using the Renode emulatorâ€”no hardware required.

The project is ideal for learning driver development, low-level register programming, and embedded firmware simulation.
<img width="932" height="513" alt="image" src="https://github.com/user-attachments/assets/2b317c72-2cd4-45d2-a287-cd5da34de8ba" />


ğŸ“ Repository Structure
/
â”œâ”€â”€ Doc/
â”‚   â”œâ”€â”€ Block_Diagrams.png
â”‚   â”œâ”€â”€ Presentation.pdf
â”‚   
â”‚
â”œâ”€â”€ UART_Driver_on_STM32F4/
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ Inc/        # uart.h, stm32f4xx.h
â”‚   â”‚   â”œâ”€â”€ Src/        # main.c, uart.c
â”‚   â”‚   â””â”€â”€ startup_stm32f407xx.s
â”‚   â”œâ”€â”€ Debug/          # Generated by STM32CubeIDE
â”‚   â”‚   â””â”€â”€ uart_baremetal.elf
â”‚   â””â”€â”€ .project/.cproject (IDE configs)
â”‚
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md (this file)

ğŸš€ Project Overview

This project demonstrates:

âœ”ï¸ Bare-Metal UART Driver (USART2)

âœ”ï¸ No HAL / No LL / No CMSIS drivers

âœ”ï¸ STM32CubeIDE GCC Build

âœ”ï¸ Verified on Renode (UART analyzer output)

âœ”ï¸ Fully open-source and beginner-friendly

UART pins used:

Peripheral	Pin	Function
USART2_TX	PA2	AF7
USART2_RX	PA3	AF7
ğŸ”§ UART Driver Features
Implemented:

Manually enabling AHB1/APB1 clocks

Configuring GPIOA in Alternate Function

Setting USART2 baud rate (BRR register)

Enabling TX & RX bits in CR1

Polling TXE before sending data

Sending strings/bytes reliably

Not using:

âŒ HAL
âŒ LL drivers
âŒ CMSIS Driver layer
âŒ CubeMX auto-code

â–¶ï¸ STM32CubeIDE Build

Open UART_Driver_on_STM32F4 in STM32CubeIDE

Build the project:

Project â†’ Build Project


Output ELF is generated here:

UART_Driver_on_STM32F4/Debug/uart_baremetal.elf


This file is used by Renode.

ğŸ–¥ï¸ Renode Simulation
1ï¸âƒ£ Start Renode
renode

2ï¸âƒ£ Load STM32F4 Platform
(monitor) mach create "stm32f4"
(monitor) machine LoadPlatformDescription @platforms/boards/stm32f4_discovery.repl

3ï¸âƒ£ Load Firmware
(monitor) sysbus LoadELF @UART_Driver_on_STM32F4/Debug/uart_baremetal.elf

4ï¸âƒ£ Open UART Analyzer
(monitor) showAnalyzer sysbus.usart2

5ï¸âƒ£ Run
(monitor) start

âœ”ï¸ Expected Output

<img width="1919" height="1015" alt="Screenshot 2025-11-30 223844" src="https://github.com/user-attachments/assets/aac29ba4-d35c-408a-ba0f-65c798aa6488" />


ğŸ“š Documentation

See the Doc/ directory:

System block diagram

UART register explanation

Memory map notes

Renode usage guide

Driver architecture explained

ğŸ¯ Skills You Will Learn

Low-level embedded C

ARM Cortex-M register programming

UART peripheral architecture

Writing drivers without HAL/LL

Using STM32CubeIDE for bare-metal

Firmware simulation using Renode

Understanding clock tree + APB bus

ğŸ“Œ Future Enhancements

 Interrupt-based UART

 SysTick delay driver

 Bare-metal I2C driver

 Bare-metal SPI driver

 DMA-based UART TX/RX

 Renode automation scripts
